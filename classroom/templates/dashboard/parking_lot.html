{% extends 'dashboard/base.html' %}

{% block content %}
  <h1>Parking Lot</h1>

  <h2>All Parking Locations</h2>
  <div>
    {% for location in locations %}
      <div class="parking-spot">
        <h3>{{ location.name }}</h3>
        <p>Status: {% if location.is_occupied %}Occupied{% else %}Available{% endif %}</p>

        {% if location.is_occupied %}
          <p>Parked by: {{ location.vehicle.license_plate }} - 
            <a href="{% url 'vehicle_location' vehicle_id=location.vehicle.id %}">View Location</a>
          </p>
        {% else %}
          <a href="{% url 'park_vehicle' location_id=location.id %}">Park Here</a>
        {% endif %}
        
        <hr>
      </div>
    {% empty %}
      <p>No parking locations available at the moment.</p>
    {% endfor %}
  </div>

  {% if vehicle %}
    <h2>Your Vehicle Location</h2>
    <p>Your vehicle with license plate {{ vehicle.license_plate }} is parked at:</p>
    <p>Parking Spot: {{ vehicle.parking_location.name }}</p>
    <p>Parked at: {{ vehicle.parked_at|date:"F j, Y, g:i a" }}</p>
  {% else %}
    <p>You do not have any vehicle parked currently.</p>
  {% endif %}
{% endblock %}
